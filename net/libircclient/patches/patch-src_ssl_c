Index: src/ssl.c
--- src/ssl.c.orig
+++ src/ssl.c
@@ -74,11 +74,6 @@ static void cb_openssl_locking_function( int mode, int
 
 // OpenSSL callback to get the thread ID
 
-static void cb_openssl_id_function( CRYPTO_THREADID * id )
-{
-	CRYPTO_THREADID_set_pointer( id, pthread_self() );
-}
-
 static int alloc_mutexes( unsigned int total )
 {
 	unsigned i;
@@ -107,7 +102,6 @@ static int ssl_init_context( irc_session_t * session )
 		return LIBIRC_ERR_NOMEM;
 
 	// Register our callbacks
-	CRYPTO_THREADID_set_callback( cb_openssl_id_function );
 	CRYPTO_set_locking_callback( cb_openssl_locking_function );
 
 	// Init it
@@ -127,9 +121,10 @@ static int ssl_init_context( irc_session_t * session )
 		return LIBIRC_ERR_SSL_INIT_FAILED;
 
 	// Disable SSLv2 as it is unsecure
+#if !defined(__OpenBSD__)
 	if ( (SSL_CTX_set_options( ssl_context, SSL_OP_NO_SSLv2) & SSL_OP_NO_SSLv2) == 0 )
 		return LIBIRC_ERR_SSL_INIT_FAILED;
-
+#endif
 	// Enable only strong ciphers
 	if ( SSL_CTX_set_cipher_list( ssl_context, "ALL:!ADH:!LOW:!EXP:!MD5:@STRENGTH" ) != 1 )
 		return LIBIRC_ERR_SSL_INIT_FAILED;
